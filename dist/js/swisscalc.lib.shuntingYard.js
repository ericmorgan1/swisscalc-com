var swisscalc=swisscalc||{};swisscalc.lib=swisscalc.lib||{},swisscalc.lib.shuntingYard=function(){this._numOpenParen=0,this._operands=[],this._operators=[],this._actionBuffer=[]},swisscalc.lib.shuntingYard.prototype.peekOperand=function(){var t=this._operands.length;return 0!==t?this._operands[t-1]:0},swisscalc.lib.shuntingYard.prototype.popOperand=function(){var t=this._operands.length;return 0!==t?this._operands.pop():0},swisscalc.lib.shuntingYard.prototype.numOperands=function(){return this._operands.length},swisscalc.lib.shuntingYard.prototype.popOperator=function(){return this._actionBuffer.pop()},swisscalc.lib.shuntingYard.prototype.numOperators=function(){return this._actionBuffer.length},swisscalc.lib.shuntingYard.prototype.inSubExpression=function(){return this._numOpenParen>0},swisscalc.lib.shuntingYard.prototype.clear=function(){this._operands.length=0,this._operators.length=0,this._actionBuffer.length=0},swisscalc.lib.shuntingYard.prototype.evaluate=function(){for(var t=0;t<this._actionBuffer.length;t++)this._operators.push(this._actionBuffer[t]);for(this._actionBuffer.length=0;this._operators.length>0;){var r=this._operators.pop();this.applyOperator(r)}return 1!=this._operands.length&&console.error("Invalid operand length ("+this._operands.length+")"),this._operands.pop()},swisscalc.lib.shuntingYard.prototype.applyOperator=function(t){var r=t.evaluate(this);this.addOperand(r)},swisscalc.lib.shuntingYard.prototype.addOperand=function(t){this._operands.push(t)},swisscalc.lib.shuntingYard.prototype.addOperator=function(t){t.IsOpenParen?this.addOpenParen(t):t.IsCloseParen?this.addCloseParen(t):t.Arity==swisscalc.lib.operator.ARITY_NULLARY?this.addNullaryOperator(t):t.Arity==swisscalc.lib.operator.ARITY_UNARY?this.addUnaryOperator(t):t.Arity==swisscalc.lib.operator.ARITY_BINARY&&this.addBinaryOperator(t)},swisscalc.lib.shuntingYard.prototype.addNullaryOperator=function(t){this.applyOperator(t)},swisscalc.lib.shuntingYard.prototype.addUnaryOperator=function(t){this.applyOperator(t)},swisscalc.lib.shuntingYard.prototype.addBinaryOperator=function(t){for(;this._actionBuffer.length>0;){var r=this._actionBuffer.length;if(!this._actionBuffer[r-1].isHigherPrecedence(t))break;var s=this._actionBuffer.pop();this.applyOperator(s)}this._actionBuffer.push(t)},swisscalc.lib.shuntingYard.prototype.addOpenParen=function(t){this._actionBuffer.push(t),this._numOpenParen++},swisscalc.lib.shuntingYard.prototype.addCloseParen=function(t){if(0!==this._numOpenParen)for(this._numOpenParen--;this._actionBuffer.length>0;){var r=this._actionBuffer.pop();if(r.IsOpenParen)return;this.applyOperator(r)}};